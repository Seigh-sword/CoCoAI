<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CoCo AI </title>
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/Seigh-sword/Free-AI-For-All/refs/heads/main/assets/CoCoAiIcon.png">
    <style>
        :root { --coco-brown: #5d4037; --coco-accent: #8bc34a; }
        body { font-family: sans-serif; background: #121212; color: white; margin: 0; display: flex; flex-direction: column; height: 100vh; }
        header { padding: 10px; background: var(--coco-brown); display: flex; align-items: center; gap: 10px; }
        .app-icon { width: 35px; height: 35px; border-radius: 50%; }
        #chat { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 10px; }
        .msg { padding: 10px; border-radius: 10px; max-width: 70%; }
        .user { align-self: flex-end; background: var(--coco-accent); color: black; }
        .ai { align-self: flex-start; background: #333; display: flex; gap: 10px; }
        .input-bar { padding: 20px; display: flex; gap: 10px; background: #1e1e1e; }
        input { flex: 1; padding: 10px; border-radius: 5px; border: none; }
    </style>
</head>
<body>
    <header>
        <img src="https://raw.githubusercontent.com/Seigh-sword/Free-AI-For-All/refs/heads/main/assets/CoCoAiIcon.png" class="app-icon">
        <h2>CoCo AI</h2>
    </header>
    <div id="chat"></div>
    <div class="input-bar">
        <input type="text" id="in" placeholder="Ask CoCo...">
        <button id="btn">Send</button>
    </div>

    <script type="module">
        import { AIHandler } from './AIHandler/AIHandler.js';
        const coco = new AIHandler();
        
        const btn = document.getElementById('btn');
        const input = document.getElementById('in');
        const chat = document.getElementById('chat');

        btn.onclick = async () => {
            const val = input.value;
            if(!val) return;
            
            // Add user message
            chat.innerHTML += `<div class="msg user">${val}</div>`;
            input.value = "";

            // Get CoCo's response
 // This will now successfully call generate() at the end!
const res = await coco.txt.prompt(val).set.txt.model("deepseek-r1").generate();
            
            // Add AI message with icon
            chat.innerHTML += `<div class="msg ai"><img src="https://raw.githubusercontent.com/Seigh-sword/Free-AI-For-All/refs/heads/main/assets/CoCoAiIcon.png" style="width:20px;height:20px;"><span>${res}</span></div>`;
            chat.scrollTop = chat.scrollHeight;
        };
    </script>
</body>
</html>
